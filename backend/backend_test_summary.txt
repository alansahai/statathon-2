======================================================
      STATFLOW — FULL BACKEND PIPELINE TEST           
======================================================

=== STEP 1: UPLOAD CSV ===
Status: 200
Response: {"status":"success","step":"upload","file_ids":["15092ecc-69f0-467b-8f60-2018639c7959"],"results":{"15092ecc-69f0-467b-8f60-2018639c7959":{"status":"success","file_info":{"file_id":"15092ecc-69f0-467b-8f60-2018639c7959","filename":"test_data.csv","filepath":"temp_uploads/uploads/default_user/15092ecc-69f0-467b-8f60-2018639c7959.csv","file_size":373,"upload_timestamp":"2026-01-08T13:36:01.557833","row_count":10,"column_count":6},"schema":{"row_count":10,"column_count":6,"columns":{"id":{"name":"id","dtype":"int64","missing_count":0,"missing_percentage":0.0,"non_missing_count":10,"unique_count":10,"semantic_type":"numeric","category":"discrete","min":1.0,"max":10.0,"mean":5.5,"median":5.5,"std":3.0276503540974917,"value_counts":{"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1},"is_categorical_like":true},"name":{"name":"name","dtype":"object","missing_count":0,"missing_percentage":0.0,"non_missing_count":10,"unique_count":10,"semantic_type":"text","category":"categorical","top_values":{"John Doe":1,"Jane Smith":1,"Bob Johnson":1,"Alice Brown":1,"Charlie Davis":1,"Diana Wilson":1,"Eve Martinez":1,"Frank Taylor":1,"Grace Lee":1,"Henry Clark":1},"most_common":"Alice Brown","is_unique_identifier":true},"age":{"name":"age","dtype":"int64","missing_count":0,"missing_percentage":0.0,"non_missing_count":10,"unique_count":10,"semantic_type":"numeric","category":"discrete","min":25.0,"max":52.0,"mean":37.2,"median":36.0,"std":8.941787044856055,"value_counts":{"25":1,"34":1,"45":1,"29":1,"52":1,"38":1,"41":1,"33":1,"47":1,"28":1},"is_categorical_like":true},"income":{"name":"income","dtype":"float64","missing_count":1,"missing_percentage":10.0,"non_missing_count":9,"unique_count":9,"semantic_type":"numeric","category":"discrete","min":45000.0,"max":95000.0,"mean":65777.77777777778,"median":62000.0,"std":17173.946676417872,"value_counts":{"45000.0":1,"62000.0":1,"78000.0":1,"51000.0":1,"95000.0":1,"73000.0":1,"58000.0":1,"82000.0":1,"48000.0":1},"is_categorical_like":true},"education":{"name":"education","dtype":"object","missing_count":0,"missing_percentage":0.0,"non_missing_count":10,"unique_count":4,"semantic_type":"text","category":"categorical","top_values":{"Bachelor":4,"Master":3,"PhD":2,"Associate":1},"most_common":"Bachelor","is_unique_identifier":false},"satisfaction":{"name":"satisfaction","dtype":"int64","missing_count":0,"missing_percentage":0.0,"non_missing_count":10,"unique_count":4,"semantic_type":"numeric","category":"discrete","min":2.0,"max":5.0,"mean":4.0,"median":4.0,"std":1.0540925533894598,"value_counts":{"5":4,"4":3,"3":2,"2":1},"is_categorical_like":true}},"missing_summary":{"total_missing":1,"columns_with_missing":["income"]}},"columns":["id","name","age","income","education","satisfaction"],"preview":[{"id":1,"name":"John Doe","age":25,"income":45000.0,"education":"Bachelor","satisfaction":4},{"id":2,"name":"Jane Smith","age":34,"income":62000.0,"education":"Master","satisfaction":5},{"id":3,"name":"Bob Johnson","age":45,"income":78000.0,"education":"PhD","satisfaction":5},{"id":4,"name":"Alice Brown","age":29,"income":51000.0,"education":"Bachelor","satisfaction":3},{"id":5,"name":"Charlie Davis","age":52,"income":95000.0,"education":"Master","satisfaction":4},{"id":6,"name":"Diana Wilson","age":38,"income":null,"education":"Bachelor","satisfaction":4},{"id":7,"name":"Eve Martinez","age":41,"income":73000.0,"education":"PhD","satisfaction":5},{"id":8,"name":"Frank Taylor","age":33,"income":58000.0,"education":"Bachelor","satisfaction":3},{"id":9,"name":"Grace Lee","age":47,"income":82000.0,"education":"Master","satisfaction":5},{"id":10,"name":"Henry Clark","age":28,"income":48000.0,"education":"Associate","satisfaction":2}],"preview_row_count":10}}}

=== STEP 2: GET SCHEMA ===
Status: 200
Response: {"status":"success","file_id":"15092ecc-69f0-467b-8f60-2018639c7959","columns":["id","name","age","income","education","satisfaction"],"total_columns":6}

=== STEP 3: SAVE SCHEMA MAPPING ===
Status: 400
Response: {"detail":"Invalid data types found: id: auto, name: auto, age: auto, income: auto, education: auto, satisfaction: auto. Valid types are: numeric, categorical, datetime"}

=== STEP 4: APPLY SCHEMA ===
Status: 400
Response: {"detail":"No schema mapping configured. Please save mapping first using POST /api/schema/save/{file_id}"}

=== STEP 5: CLEANING — DETECT ISSUES ===
Status: 200
{"status":"success","file_ids":["15092ecc-69f0-467b-8f60-2018639c7959"],"results":{"15092ecc-69f0-467b-8f60-2018639c7959":{"issues":{"missing_summary":{"income":{"missing_count":1,"missing_percent":10.0,"non_missing_count":9}},"numeric_summary":{"id":{"dtype":"int64","count":10,"mean":5.5,"std":3.0276503540974917,"min":1.0,"q1":3.25,"median":5.5,"q3":7.75,"max":10.0,"unique_count":10},"age":{"dtype":"int64","count":10,"mean":37.2,"std":8.941787044856055,"min":25.0,"q1":30.0,"median":36.0,"q3":44.0,"max":52.0,"unique_count":10},"income":{"dtype":"float64","count":9,"mean":65777.77777777778,"std":17173.946676417872,"min":45000.0,"q1":51000.0,"median":62000.0,"q3":78000.0,"max":95000.0,"unique_count":9},"satisfaction":{"dtype":"int64","count":10,"mean":4.0,"std":1.0540925533894598,"min":2.0,"q1":3.25,"median":4.0,"q3":5.0,"max":5.0,"unique_count":4}},"categorical_summary":{"name":{"dtype":"object","count":10,"unique_count":10,"top_values":{"John Doe":1,"Jane Smith":1,"Bob Johnson":1,"Alice Brown":1,"Charlie Davis":1,"Diana Wilson":1,"Eve Martinez":1,"Frank Taylor":1,"Grace Lee":1,"Henry Clark":1},"most_common":"Alice Brown"},"education":{"dtype":"object","count":10,"unique_count":4,"top_values":{"Bachelor":4,"Master":3,"PhD":2,"Associate":1},"most_common":"Bachelor"}},"potential_id_columns":["id","name","age","income"]}}}}

=== STEP 6: AUTO CLEAN DATA ===
Status: 200
{"status":"success","message":"Auto cleaning completed","file_ids":["15092ecc-69f0-467b-8f60-2018639c7959"],"results":{"15092ecc-69f0-467b-8f60-2018639c7959":{"cleaned_file_path":"temp_uploads\\cleaned\\default_user\\15092ecc-69f0-467b-8f60-2018639c7959_cleaned.csv","summary":{"status":"success","cleaning_logs":[{"timestamp":"2026-01-08T13:36:01.654146","operation":"detect_issues","details":{"missing_columns":1,"numeric_columns":4,"categorical_columns":2,"potential_id_columns":4}},{"timestamp":"2026-01-08T13:36:01.655654","operation":"impute_missing","details":{"method":"auto","columns_processed":1,"details":[{"column":"income","method":"skipped","reason":"potential_id_column"}]}},{"timestamp":"2026-01-08T13:36:01.658538","operation":"detect_outliers","details":{"method":"iqr","columns_analyzed":4,"total_outliers":0}},{"timestamp":"2026-01-08T13:36:01.661133","operation":"detect_outliers","details":{"method":"iqr","columns_analyzed":4,"total_outliers":0}},{"timestamp":"2026-01-08T13:36:01.661196","operation":"fix_outliers","details":{"method":"iqr","columns_fixed":0,"details":[]}}],"issue_summary":{"missing_summary":{"income":{"missing_count":1,"missing_percent":10.0,"non_missing_count":9}},"numeric_summary":{"id":{"dtype":"int64","count":10,"mean":5.5,"std":3.0276503540974917,"min":1.0,"q1":3.25,"median":5.5,"q3":7.75,"max":10.0,"unique_count":10},"age":{"dtype":"int64","count":10,"mean":37.2,"std":8.941787044856055,"min":25.0,"q1":30.0,"median":36.0,"q3":44.0,"max":52.0,"unique_count":10},"income":{"dtype":"float64","count":9,"mean":65777.77777777778,"std":17173.946676417872,"min":45000.0,"q1":51000.0,"median":62000.0,"q3":78000.0,"max":95000.0,"unique_count":9},"satisfaction":{"dtype":"int64","count":10,"mean":4.0,"std":1.0540925533894598,"min":2.0,"q1":3.25,"median":4.0,"q3":5.0,"max":5.0,"unique_count":4}},"categorical_summary":{"name":{"dtype":"object","count":10,"unique_count":10,"top_values":{"John Doe":1,"Jane Smith":1,"Bob Johnson":1,"Alice Brown":1,"Charlie Davis":1,"Diana Wilson":1,"Eve Martinez":1,"Frank Taylor":1,"Grace Lee":1,"Henry Clark":1},"most_common":"Alice Brown"},"education":{"dtype":"object","count":10,"unique_count":4,"top_values":{"Bachelor":4,"Master":3,"PhD":2,"Associate":1},"most_common":"Bachelor"}},"potential_id_columns":["id","name","age","income"]},"outlier_summary":{"id":{"method":"iqr","lower_bound":-3.5,"upper_bound":14.5,"q1":3.25,"q3":7.75,"iqr":4.5,"outlier_count":0,"outlier_percent":0.0,"outlier_values":[]},"age":{"method":"iqr","lower_bound":9.0,"upper_bound":65.0,"q1":30.0,"q3":44.0,"iqr":14.0,"outlier_count":0,"outlier_percent":0.0,"outlier_values":[]},"income":{"method":"iqr","lower_bound":10500.0,"upper_bound":118500.0,"q1":51000.0,"q3":78000.0,"iqr":27000.0,"outlier_count":0,"outlier_percent":0.0,"outlier_values":[]},"satisfaction":{"method":"iqr","lower_bound":0.625,"upper_bound":7.625,"q1":3.25,"q3":5.0,"iqr":1.75,"outlier_count":0,"outlier_percent":0.0,"outlier_values":[]}},"cleaned_preview":[{"id":1,"name":"John Doe","age":25,"income":45000.0,"education":"Bachelor","satisfaction":4},{"id":2,"name":"Jane Smith","age":34,"income":62000.0,"education":"Master","satisfaction":5},{"id":3,"name":"Bob Johnson","age":45,"income":78000.0,"education":"PhD","satisfaction":5},{"id":4,"name":"Alice Brown","age":29,"income":51000.0,"education":"Bachelor","satisfaction":3},{"id":5,"name":"Charlie Davis","age":52,"income":95000.0,"education":"Master","satisfaction":4},{"id":6,"name":"Diana Wilson","age":38,"income":null,"education":"Bachelor","satisfaction":4},{"id":7,"name":"Eve Martinez","age":41,"income":73000.0,"education":"PhD","satisfaction":5},{"id":8,"name":"Frank Taylor","age":33,"income":58000.0,"education":"Bachelor","satisfaction":3},{"id":9,"name":"Grace Lee","age":47,"income":82000.0,"education":"Master","satisfaction":5},{"id":10,"name":"Henry Clark","age":28,"income":48000.0,"education":"Associate","satisfaction":2}],"row_count":10,"column_count":6,"original_row_count":10,"rows_dropped":0}}}}

=== STEP 7: WEIGHTING ENGINE ===
Status: 200
{"status":"partial_success","file_ids":["15092ecc-69f0-467b-8f60-2018639c7959"],"results":{},"errors":{"15092ecc-69f0-467b-8f60-2018639c7959":"Invalid method 'auto'. Use 'base', 'poststrat', or 'raking'"}}

=== STEP 8: DESCRIPTIVE ANALYSIS ===
Status: 422
{"detail":[{"type":"missing","loc":["body","columns"],"msg":"Field required","input":{"file_ids":["15092ecc-69f0-467b-8f60-2018639c7959"]}}]}

=== STEP 9: INSIGHT OVERVIEW ===
Status: 500
{"detail":"Overview error: 404: File not found: 15092ecc-69f0-467b-8f60-2018639c7959"}

=== STEP 10: GENERATE PDF REPORT ===
PDF saved as generated_report.pdf

=== TEST COMPLETE IN 0.15s ===
